############################################
# Dragon Mod - Expanded Buildings
# File: common/buildings/dragon_expanded_buildings.txt
# Adds: Dragon Pits, Dragon Shelters, Dragon Killer Towers
############################################

##########
# DRAGON PIT - Military dragon housing (Pro-Dragon)
# Unlocked via innovations
##########

dragon_pit_01 = {
	construction_time = slow_construction_time
	
	type_icon = "icon_building_dragon_pit.dds"
	
	can_construct_potential = {
		scope:holder.culture = {
			has_innovation = innovation_dragon_pits
		}
	}
	
	can_construct = {
		scope:holder = {
			culture = {
				has_cultural_pillar = heritage_arick
			}
		}
	}
	
	cost_gold = 400
	
	character_modifier = {
		knight_effectiveness_mult = 0.1
		dread_baseline_add = 5
	}
	
	province_modifier = {
		garrison_size = 0.15
	}
	
	county_modifier = {
		levy_size = 0.05
	}
	
	next_building = dragon_pit_02
	
	ai_value = {
		base = 100
		modifier = {
			add = 200
			scope:holder.culture = {
				has_cultural_pillar = heritage_arick
			}
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_martial
}

dragon_pit_02 = {
	construction_time = slow_construction_time
	
	type_icon = "icon_building_dragon_pit.dds"
	
	can_construct_potential = {
		scope:holder.culture = {
			has_innovation = innovation_dragon_breeding
		}
	}
	
	cost_gold = 800
	
	character_modifier = {
		knight_effectiveness_mult = 0.15
		dread_baseline_add = 10
		prowess = 2
	}
	
	province_modifier = {
		garrison_size = 0.25
		fort_level = 1
	}
	
	county_modifier = {
		levy_size = 0.1
		levy_reinforcement_rate = 0.1
	}
	
	next_building = dragon_pit_03
	
	ai_value = {
		base = 100
		modifier = {
			add = 200
			scope:holder.culture = {
				has_cultural_pillar = heritage_arick
			}
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_martial
}

dragon_pit_03 = {
	construction_time = very_slow_construction_time
	
	type_icon = "icon_building_dragon_pit.dds"
	
	can_construct_potential = {
		scope:holder.culture = {
			has_innovation = innovation_dragon_mastery
		}
	}
	
	cost_gold = 1500
	
	character_modifier = {
		knight_effectiveness_mult = 0.25
		dread_baseline_add = 20
		prowess = 4
		martial = 2
		army_damage_mult = 0.1
	}
	
	province_modifier = {
		garrison_size = 0.4
		fort_level = 2
		defender_holding_advantage = 5
	}
	
	county_modifier = {
		levy_size = 0.2
		levy_reinforcement_rate = 0.2
		development_growth_factor = 0.1
	}
	
	ai_value = {
		base = 100
		modifier = {
			add = 300
			scope:holder.culture = {
				has_cultural_pillar = heritage_arick
			}
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_martial
}

##########
# DRAGON SHELTER - Defensive anti-dragon (Anti-Dragon)
# For cultures with dragon_fearers or similar traditions
##########

dragon_shelter_01 = {
	construction_time = slow_construction_time
	
	type_icon = "icon_building_dragon_shelter.dds"
	
	can_construct_potential = {
		scope:holder.culture = {
			has_innovation = innovation_fire_suppression
		}
	}
	
	can_construct = {
		scope:holder = {
			culture = {
				OR = {
					has_cultural_tradition = tradition_dragonslayers
					has_cultural_tradition = tradition_dragon_hunters
					has_cultural_tradition = tradition_dragon_fearers
				}
			}
		}
	}
	
	cost_gold = 300
	
	character_modifier = {
		stress_loss_mult = 0.05
	}
	
	province_modifier = {
		garrison_size = 0.2
		fort_level = 1
		defender_holding_advantage = 3
	}
	
	county_modifier = {
		development_growth_factor = -0.05
	}
	
	next_building = dragon_shelter_02
	
	ai_value = {
		base = 50
		modifier = {
			add = 150
			any_neighboring_province = {
				culture = {
					has_cultural_pillar = heritage_arick
				}
			}
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_stewardship
}

dragon_shelter_02 = {
	construction_time = slow_construction_time
	
	type_icon = "icon_building_dragon_shelter.dds"
	
	cost_gold = 600
	
	character_modifier = {
		stress_loss_mult = 0.1
		stewardship = 1
	}
	
	province_modifier = {
		garrison_size = 0.35
		fort_level = 2
		defender_holding_advantage = 5
	}
	
	county_modifier = {
		development_growth_factor = -0.03
		build_gold_cost = -0.1
	}
	
	next_building = dragon_shelter_03
	
	ai_value = {
		base = 50
		modifier = {
			add = 200
			any_neighboring_province = {
				culture = {
					has_cultural_pillar = heritage_arick
				}
			}
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_stewardship
}

dragon_shelter_03 = {
	construction_time = very_slow_construction_time
	
	type_icon = "icon_building_dragon_shelter.dds"
	
	cost_gold = 1200
	
	character_modifier = {
		stress_loss_mult = 0.15
		stewardship = 2
		health = 0.25
	}
	
	province_modifier = {
		garrison_size = 0.5
		fort_level = 3
		defender_holding_advantage = 8
	}
	
	county_modifier = {
		development_growth_factor = 0.05
		build_gold_cost = -0.15
		build_speed = -0.1
	}
	
	ai_value = {
		base = 50
		modifier = {
			add = 250
			any_neighboring_province = {
				culture = {
					has_cultural_pillar = heritage_arick
				}
			}
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_stewardship
}

##########
# DRAGON KILLER TOWER - Offensive anti-dragon fortification
# Late Medieval innovation unlock
##########

dragon_killer_tower = {
	construction_time = very_slow_construction_time
	
	type_icon = "icon_building_dragon_tower.dds"
	
	can_construct_potential = {
		scope:holder.culture = {
			has_innovation = innovation_dragon_eradication
		}
	}
	
	can_construct = {
		scope:holder = {
			culture = {
				OR = {
					has_cultural_tradition = tradition_dragonslayers
					has_cultural_tradition = tradition_dragon_hunters
				}
			}
		}
	}
	
	cost_gold = 1000
	
	character_modifier = {
		prowess = 3
		martial = 2
		dread_baseline_add = 10
	}
	
	province_modifier = {
		garrison_size = 0.3
		fort_level = 2
		defender_holding_advantage = 10
	}
	
	county_modifier = {
		levy_size = 0.1
		hostile_raid_time = 0.5
	}
	
	ai_value = {
		base = 50
		modifier = {
			add = 150
			any_neighboring_province = {
				culture = {
					has_cultural_pillar = heritage_arick
				}
			}
		}
		modifier = {
			add = 100
			scope:holder = {
				any_liege_or_above = {
					culture = {
						has_cultural_pillar = heritage_arick
					}
				}
			}
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_martial
}

##########
# DRAGONLORD'S ROOST - Prestige building for established dragonlords
# Requires adult dragon and dragon rider
##########

dragonlord_roost = {
	construction_time = very_slow_construction_time
	
	type_icon = "icon_building_dragonlord_roost.dds"
	
	can_construct_potential = {
		# Uses Dragon World trigger
		scope:holder = {
			has_dragon_rider_trigger = yes
		}
	}
	
	can_construct = {
		scope:holder = {
			highest_held_title_tier >= tier_duchy
			has_dragon_equipped_trigger = yes
		}
	}
	
	cost_gold = 750
	
	character_modifier = {
		monthly_prestige = 1.0
		dread_baseline_add = 15
		knight_effectiveness_mult = 0.2
		vassal_opinion = 5
	}
	
	province_modifier = {
		garrison_size = 0.25
		fort_level = 1
	}
	
	county_modifier = {
		development_growth_factor = 0.1
		tax_mult = 0.1
	}
	
	ai_value = {
		base = 200
		modifier = {
			add = 300
			scope:holder = {
				has_dragon_rider_trigger = yes
			}
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_diplomacy
}

##########
# Dragon Hatchery
##########

dragon_hatchery_01 = {
	construction_time = slow_construction_time

	type_icon = "icon_building_dragon_hatchery.dds"

	can_construct = {
		scope:holder = {
			highest_held_title_tier >= tier_duchy
			dynasty = {
				has_dynasty_perk = dragon_blood_legacy_1
			}
		}
	}

	cost_gold = 250

	character_modifier = {
		monthly_dynasty_prestige_mult = 0.05
		monthly_piety_gain_per_knight_add = 0.1
		learning_per_prestige_level = 1
	}

	next_building = dragon_hatchery_02

	ai_value = {
		base = 100
	}

	type = special

	flag = travel_point_of_interest_learning
}

dragon_hatchery_02 = {
	construction_time = slow_construction_time
	type_icon = "icon_building_dragon_hatchery.dds"
	
	cost_gold = 500

	character_modifier = {
		monthly_dynasty_prestige_mult = 0.1
		monthly_piety_gain_per_knight_add = 0.15
		learning_per_prestige_level = 2
	}
	
	next_building = dragon_hatchery_03

	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_learning
}

dragon_hatchery_03 = {
	construction_time = very_slow_construction_time
	type_icon = "icon_building_dragon_hatchery.dds"
	
	cost_gold = 1000

	character_modifier = {
		monthly_dynasty_prestige_mult = 0.2
		monthly_piety_gain_per_knight_add = 0.25
		learning_per_prestige_level = 4
	}

	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_learning
}